[
  {
    "__docId__": 1,
    "kind": "external",
    "name": "Infinity",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Infinity",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Infinity",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 2,
    "kind": "external",
    "name": "NaN",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NaN",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~NaN",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 3,
    "kind": "external",
    "name": "undefined",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~undefined",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 4,
    "kind": "external",
    "name": "null",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~null",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 5,
    "kind": "external",
    "name": "Object",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Object",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 6,
    "kind": "external",
    "name": "object",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~object",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 7,
    "kind": "external",
    "name": "Function",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Function",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 8,
    "kind": "external",
    "name": "function",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~function",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 9,
    "kind": "external",
    "name": "Boolean",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Boolean",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 10,
    "kind": "external",
    "name": "boolean",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~boolean",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 11,
    "kind": "external",
    "name": "Symbol",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Symbol",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 12,
    "kind": "external",
    "name": "Error",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Error",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 13,
    "kind": "external",
    "name": "EvalError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/EvalError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~EvalError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 14,
    "kind": "external",
    "name": "InternalError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/InternalError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~InternalError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 15,
    "kind": "external",
    "name": "RangeError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RangeError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~RangeError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 16,
    "kind": "external",
    "name": "ReferenceError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ReferenceError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~ReferenceError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 17,
    "kind": "external",
    "name": "SyntaxError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SyntaxError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~SyntaxError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 18,
    "kind": "external",
    "name": "TypeError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~TypeError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 19,
    "kind": "external",
    "name": "URIError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/URIError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~URIError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 20,
    "kind": "external",
    "name": "Number",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Number",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 21,
    "kind": "external",
    "name": "number",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~number",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 22,
    "kind": "external",
    "name": "Date",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Date",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 23,
    "kind": "external",
    "name": "String",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~String",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 24,
    "kind": "external",
    "name": "string",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~string",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 25,
    "kind": "external",
    "name": "RegExp",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~RegExp",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 26,
    "kind": "external",
    "name": "Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 27,
    "kind": "external",
    "name": "Int8Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int8Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Int8Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 28,
    "kind": "external",
    "name": "Uint8Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Uint8Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 29,
    "kind": "external",
    "name": "Uint8ClampedArray",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8ClampedArray",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Uint8ClampedArray",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 30,
    "kind": "external",
    "name": "Int16Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int16Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Int16Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 31,
    "kind": "external",
    "name": "Uint16Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint16Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Uint16Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 32,
    "kind": "external",
    "name": "Int32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int32Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Int32Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 33,
    "kind": "external",
    "name": "Uint32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint32Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Uint32Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 34,
    "kind": "external",
    "name": "Float32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Float32Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 35,
    "kind": "external",
    "name": "Float64Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float64Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Float64Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 36,
    "kind": "external",
    "name": "Map",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Map",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 37,
    "kind": "external",
    "name": "Set",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Set",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 38,
    "kind": "external",
    "name": "WeakMap",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~WeakMap",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 39,
    "kind": "external",
    "name": "WeakSet",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~WeakSet",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 40,
    "kind": "external",
    "name": "ArrayBuffer",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~ArrayBuffer",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 41,
    "kind": "external",
    "name": "DataView",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~DataView",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 42,
    "kind": "external",
    "name": "JSON",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~JSON",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 43,
    "kind": "external",
    "name": "Promise",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Promise",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 44,
    "kind": "external",
    "name": "Generator",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Generator",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Generator",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 45,
    "kind": "external",
    "name": "GeneratorFunction",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/GeneratorFunction",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~GeneratorFunction",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 46,
    "kind": "external",
    "name": "Reflect",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Reflect",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 47,
    "kind": "external",
    "name": "Proxy",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Proxy",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 48,
    "kind": "file",
    "name": "src/main/js/index.js",
    "content": "// @flow\n\nimport reqresnext from './reqresnext'\nimport Request from './request'\nimport Response from './response'\n\nexport default reqresnext\nexport {\n  Request,\n  Response\n}\n",
    "static": true,
    "longname": "/home/travis/build/antongolub/reqresnext/src/main/js/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 49,
    "kind": "file",
    "name": "src/test/js/index.js",
    "content": "import reqresnext, { Request, Response } from '../../main/js'\n\ndescribe('index', () => {\n  it('exposes api', () => {\n    expect(Request).toEqual(expect.any(Function))\n    expect(Response).toEqual(expect.any(Function))\n    expect(reqresnext).toEqual(expect.any(Function))\n  })\n})\n",
    "static": true,
    "longname": "/home/travis/build/antongolub/reqresnext/src/test/js/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 50,
    "kind": "file",
    "name": "src/test/js/reqresnext.js",
    "content": "import reqresnext from '../../main/js/reqresnext'\n\ndescribe('reqresnext', () => {\n  it('generates proper result map', () => {\n    const { req, res, next } = reqresnext({\n      method: 'GET',\n      url: '/example.com'\n    })\n\n    expect(req).toEqual(expect.any(Object))\n    expect(res).toEqual(expect.any(Object))\n    expect(next).toEqual(expect.any(Function))\n  })\n\n  describe('req-res cross links:', () => {\n    it('are added if not specified in the opts', () => {\n      const { req, res } = reqresnext({}, {})\n\n      expect(req.res).toEqual(res)\n      expect(res.req).toEqual(req)\n    })\n\n    it('are skipped otherwise', () => {\n      const foo = {}\n      const bar = {}\n      const { req, res } = reqresnext({ res: foo }, { req: bar })\n\n      expect(req.res).toEqual(foo)\n      expect(res.req).toEqual(bar)\n    })\n  })\n\n  describe('next', () => {\n    it('creates empty fn if param is undefined', () => {\n      const { next } = reqresnext()\n\n      expect(next).toEqual(expect.any(Function))\n      expect(next()).toBeUndefined()\n    })\n\n    it('passes back optional handler', () => {\n      const handler = () => {}\n      const { next } = reqresnext({}, {}, handler)\n\n      expect(next).toBe(handler)\n    })\n  })\n})\n",
    "static": true,
    "longname": "/home/travis/build/antongolub/reqresnext/src/test/js/reqresnext.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 51,
    "kind": "file",
    "name": "src/test/js/request.js",
    "content": "import Request from '../../main/js/request'\nimport { IncomingMessage } from 'http'\n\ndescribe('request', () => {\n  describe('constructor', () => {\n    it('returns proper instance', () => {\n      const req = new Request()\n\n      // NOTE Yes, it's correct. You can rely on the fact that req.constructor refers to IncomingMessage.\n      expect(req).not.toBeInstanceOf(Request)\n      expect(req).toBeInstanceOf(IncomingMessage)\n    })\n  })\n\n  describe('proto', () => {\n    describe('url', () => {\n      it('exposes path parts as getters', () => {\n        const req = new Request({ url: 'https://example.com' })\n\n        expect(req.hostname).toBe('example.com')\n        expect(req.protocol).toBe('https')\n      })\n\n      it('opts form has priority', () => {\n        const req = new Request({ host: 'foobar.com', protocol: 'http', url: 'https://example.com' })\n\n        expect(req.path).toBe('/')\n        expect(req.hostname).toBe('foobar.com')\n        expect(req.host).toBe('foobar.com')\n        expect(req.protocol).toBe('http')\n      })\n\n      it('attaches default host and protocol values', () => {\n        const req = new Request({ url: '/example.com' })\n\n        expect(req.url).toBe('/example.com')\n        expect(req.host).toBe('localhost')\n        expect(req.protocol).toBe('http')\n      })\n    })\n\n    describe('headers', () => {\n      it('exposes proper getters', () => {\n        const req = new Request({ headers: { foo: 'bar', baz: 'qux' } })\n\n        expect(req.headers.foo).toBe('bar')\n        expect(req.header('foo')).toBe('bar')\n        expect(req.get('BAZ')).toBe('qux')\n      })\n    })\n\n    describe('ip', () => {\n      it('resolves value from headers', () => {\n        const req = new Request({\n          headers: {\n            'x-forwarded-for': '192.168.1.10'\n          },\n          method: 'GET'\n        })\n\n        expect(req.ip).toBe('192.168.1.10')\n      })\n    })\n\n    describe('method', () => {\n      it('is passed down', () => {\n        const req = new Request({\n          method: 'GET'\n        })\n        expect(req.method).toBe('GET')\n      })\n    })\n\n    describe('events', () => {\n      it('on', () => {\n        let foo\n        const req = new Request()\n        req.on('data', () => {\n          foo = 'bar'\n        })\n        req.emit('data')\n\n        expect(foo).toBe('bar')\n      })\n    })\n\n    describe('_flush', () => {\n      it('does nothing', () => {\n        const req = new Request()\n\n        expect(req._flush()).toBeUndefined()\n      })\n    })\n  })\n})\n",
    "static": true,
    "longname": "/home/travis/build/antongolub/reqresnext/src/test/js/request.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 52,
    "kind": "file",
    "name": "src/test/js/response.js",
    "content": "import Response from '../../main/js/response'\nimport { ServerResponse } from 'http'\n\ndescribe('response', () => {\n  describe('construtor', () => {\n    it('returns proper instance', () => {\n      const res = new Response()\n\n      expect(res).not.toBeInstanceOf(Response)\n      expect(res).toBeInstanceOf(ServerResponse)\n    })\n\n    it('inherits http.ServerResponse', () => {\n      const res = new Response()\n\n      expect(res.pipe).toEqual(expect.any(Function))\n      expect(res.setHeader).toEqual(expect.any(Function))\n      expect(res.getHeader).toEqual(expect.any(Function))\n    })\n\n    it('passes optional props', () => {\n      const end = () => {}\n      const res = new Response({ foo: 'bar', end })\n\n      expect(res.foo).toBe('bar')\n      expect(res.end).not.toEqual(end)\n    })\n  })\n\n  describe('proto', () => {\n    it('send', () => {\n      const res = new Response()\n      res.send('foo')\n      expect(res.body).toBe('foo')\n    })\n\n    it('json', () => {\n      const res = new Response()\n      const data = { foo: 'bar' }\n      res.json(data)\n\n      expect(res.body).toEqual(JSON.stringify(data))\n    })\n\n    it('body', () => {\n      const res = new Response()\n      res.send('foo')\n      expect(res.body).toBe('foo')\n\n      expect(() => {\n        res.body = 'bar'\n      }).toThrow('Use .send(), .write() or .json()')\n    })\n\n    it('cookies', () => {\n      const foo = { name: 'foo', value: 'bar', options: {} }\n      const res = new Response({ cookies: [foo] })\n\n      expect(res.get('Set-Cookie')).toBe('foo=bar; Path=/')\n    })\n\n    it('on', () => {\n      let foo\n      const res = new Response()\n      res.on('finish', () => {\n        foo = 'bar'\n      })\n\n      res.send('')\n\n      expect(foo).toBe('bar')\n    })\n\n    it('write', () => {\n      const res = new Response()\n      res.write('foo')\n      res.write(Buffer.from('bar'))\n      res.write()\n      expect(res.body).toBe('foobar')\n    })\n  })\n})\n",
    "static": true,
    "longname": "/home/travis/build/antongolub/reqresnext/src/test/js/response.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "kind": "index",
    "content": "# reqresnext\n\n[![buildStatus](https://img.shields.io/travis/antongolub/reqresnext.svg?maxAge=60000&branch=master)](https://travis-ci.org/antongolub/reqresnext)\n[![Coveralls](https://img.shields.io/coveralls/antongolub/reqresnext.svg?maxAge=60000)](https://coveralls.io/github/antongolub/reqresnext)\n[![dependencyStatus](https://img.shields.io/david/antongolub/reqresnext.svg?maxAge=60000)](https://david-dm.org/antongolub/reqresnext)\n[![devDependencyStatus](https://img.shields.io/david/dev/antongolub/reqresnext.svg?maxAge=60000)](https://david-dm.org/antongolub/reqresnext)\n[![Code Climate](https://codeclimate.com/github/codeclimate/codeclimate/badges/gpa.svg)](https://codeclimate.com/github/antongolub/reqresnext)\n[![js-standard-style](https://img.shields.io/badge/code%20style-standard-brightgreen.svg)](http://standardjs.com)\n[![Greenkeeper badge](https://badges.greenkeeper.io/antongolub/reqresnext.svg)](https://greenkeeper.io/)\n\n\nTiny helper for express middleware testing.\n\n##### Motivation\nThere're several nice mocking tools for express.\nThe best of them (imho) is [node-mocks-http](https://github.com/howardabrams/node-mocks-http) by Howard Abrams.\nThis lib brings constructors, that accurately reproduces logic of express classes. That's pretty cool, but sometimes you need a bit more.\n\nReqresnext:\n1. Just uses `express` proto directly.\n2. Exposes the only additional property to verify outgoing data — `res.body`.\n\n##### Usage examples\n```javascript\n    import reqresnext from 'reqresnext'\n \n    it('middleware does something', () => {\n      const {req, res, next} = reqresnext(<ReqOptions>, <ResOptions>)\n      mware(req, res, next)\n \n      expect(res.statusCode).toEqual('...')\n      expect(res.body).toEqual('...')\n    })\n```\n##### Exposed constructors\nAlso you may construct `req/res` instances directly:\n```javascript\n    import {Response, Request} from 'reqresnext'\n\n    const foo = {name: 'foo', value: 'bar', options: {}}\n    const res = new Response({cookies: [foo]})\n    \n    expect(res.get('Set-Cookie')).toEqual('foo=bar; Path=/')\n```\nSupported options are described in [interface](./src/interface.js). The main ones:\n```javascript\n// cookies\n    const foo = {name: 'foo', value: 'bar', options: {}}\n    const res = new Response({cookies: [foo]})\n\n// headers\n    const req = new Request({headers: {foo: 'bar', baz: 'qux'}})\n\n// url\n    const req = new Request({url: 'https://example.com'})\n```\n\nAny additional props that does not intersect with proto are injected as is.\n```javascript\n    const res = new Response({foo: 'bar', baz: 1, ...})\n    res.foo // 'bar'\n```\n\n#### `next()` handler \n`Next` handler may be wrapped with `spy` anytime: before or after `reqresnext`. If function is specified, the factory just passes it back.\n```javascript\n  const handler = chai.spy(() => {})\n  const {next} = reqresnext({}, {}, handler)\n  \n  next === handler // true  \n```\n",
    "longname": "/home/travis/build/antongolub/reqresnext/README.md",
    "name": "./README.md",
    "static": true,
    "access": "public"
  },
  {
    "kind": "packageJSON",
    "content": "{\n  \"name\": \"reqresnext\",\n  \"version\": \"1.5.2\",\n  \"description\": \"Tiny helper for express middleware testing\",\n  \"main\": \"target/es5/index.js\",\n  \"@std/esm\": {\n    \"mode\": \"all\",\n    \"cjs\": true\n  },\n  \"scripts\": {\n    \"fetch:types\": \"flow-typed install express@4.x.x lodash@4.x.x setprototypeof@1.x.x\",\n    \"flow\": \"flow\",\n    \"flow:coverage\": \"flow-coverage-report -i 'src/main/js/**/*.js' -t html -t json -t text --threshold 75\",\n    \"build\": \"BABEL_ENV=production babel src/main/js --out-dir target/es5 && npm run docs\",\n    \"lint\": \"standard src/**/*.js\",\n    \"lint:fix\": \"npm run lint -- --fix\",\n    \"jest\": \"jest -w 2\",\n    \"test\": \"npm run flow && npm run flow:coverage && npm run lint && npm run jest\",\n    \"test:report\": \"npm test && npm run codeclimate:push && npm run coveralls:push\",\n    \"codeclimate:push\": \"codeclimate-test-reporter < ./coverage/lcov.info\",\n    \"coveralls:push\": \"cat ./coverage/lcov.info | coveralls\",\n    \"docs\": \"esdoc\",\n    \"release\": \"npm test && npm run build && npm run semantic-release\",\n    \"semantic-release\": \"semantic-release\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git@github.com:antongolub/reqresnext.git\"\n  },\n  \"keywords\": [\n    \"mock\",\n    \"express mock\",\n    \"http mock\",\n    \"mock testing\",\n    \"req res next\"\n  ],\n  \"author\": \"Anton Golub <a.golub@qiwi.com> (http://antongolub.com)\",\n  \"license\": \"MIT\",\n  \"dependencies\": {\n    \"express\": \"^4.17.1\",\n    \"lodash\": \"^4.17.15\",\n    \"setprototypeof\": \"^1.2.0\"\n  },\n  \"devDependencies\": {\n    \"@babel/cli\": \"^7.5.5\",\n    \"@babel/core\": \"^7.5.5\",\n    \"@babel/plugin-transform-flow-strip-types\": \"^7.4.4\",\n    \"@babel/plugin-transform-runtime\": \"^7.5.5\",\n    \"@babel/polyfill\": \"^7.4.4\",\n    \"@babel/preset-env\": \"^7.5.5\",\n    \"@babel/preset-flow\": \"^7.0.0\",\n    \"@qiwi/semantic-release-gh-pages-plugin\": \"^1.10.5\",\n    \"@semantic-release/changelog\": \"^3.0.4\",\n    \"@semantic-release/git\": \"^7.0.16\",\n    \"@semantic-release/release-notes-generator\": \"^7.2.1\",\n    \"babel-core\": \"^7.0.0-bridge.0\",\n    \"babel-eslint\": \"^10.0.2\",\n    \"babel-plugin-transform-class-properties\": \"^6.24.1\",\n    \"babel-preset-minify\": \"^0.5.0\",\n    \"codeclimate-test-reporter\": \"^0.5.1\",\n    \"coveralls\": \"^3.0.5\",\n    \"esdoc\": \"^1.1.0\",\n    \"esdoc-coverage-plugin\": \"^1.1.0\",\n    \"esdoc-flow-plugin\": \"^1.0.0\",\n    \"esdoc-standard-plugin\": \"^1.0.0\",\n    \"eslint-plugin-flowtype\": \"^3.13.0\",\n    \"flow-bin\": \"^0.104.0\",\n    \"flow-coverage-report\": \"^0.6.1\",\n    \"flow-remove-types\": \"^2.104.0\",\n    \"flow-typed\": \"^2.6.1\",\n    \"jest\": \"^24.8.0\",\n    \"semantic-release\": \"^15.13.19\",\n    \"standard\": \"^13.1.0\"\n  },\n  \"files\": [\n    \"README.md\",\n    \"CHANGELOG.md\",\n    \"target/es5/\"\n  ],\n  \"release\": {\n    \"branch\": \"master\",\n    \"plugins\": [\n      \"@semantic-release/release-notes-generator\",\n      \"@semantic-release/changelog\",\n      \"@semantic-release/git\",\n      \"@semantic-release/github\",\n      \"@semantic-release/npm\",\n      [\n        \"@qiwi/semantic-release-gh-pages-plugin\",\n        {\n          \"msg\": \"updated\",\n          \"branch\": \"gh-pages\"\n        }\n      ]\n    ]\n  },\n  \"standard\": {\n    \"parser\": \"babel-eslint\",\n    \"plugins\": [\n      \"flowtype\"\n    ],\n    \"globals\": [\n      \"it\",\n      \"expect\",\n      \"describe\",\n      \"before\",\n      \"after\",\n      \"afterEach\",\n      \"beforeEach\"\n    ],\n    \"rules\": {\n      \"use-flow-type\": 1\n    },\n    \"ignore\": [],\n    \"settings\": {\n      \"flowtype\": {\n        \"onlyFilesWithFlowAnnotation\": true\n      }\n    }\n  },\n  \"jest\": {\n    \"collectCoverage\": true,\n    \"coveragePathIgnorePatterns\": [\n      \"<rootDir>/src/main/js/interface.js\"\n    ],\n    \"collectCoverageFrom\": [\n      \"<rootDir>/src/main/**/*.js\"\n    ],\n    \"testMatch\": [\n      \"<rootDir>/src/test/**/*.js\"\n    ]\n  }\n}\n",
    "longname": "/home/travis/build/antongolub/reqresnext/package.json",
    "name": "package.json",
    "static": true,
    "access": "public"
  }
]